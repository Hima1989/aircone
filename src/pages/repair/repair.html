<!--
  Generated template for the RepairPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="home-header">
    <ion-grid>
        <ion-row>
            <ion-col col-2 text-left (click)="goBack()">
                <ion-icon class="icon-back" ios="ios-arrow-back" md="md-arrow-back"></ion-icon>
            </ion-col>
            <ion-col col-8 text-center>
                <ion-title class="title">
                    <h3 class="content-heading" text-center>Repair</h3>
                </ion-title>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-header>
<ion-content padding>
    <ion-icon ios="ios-add-circle" md="md-add-circle" end></ion-icon>

    <!-- </ion-item>
        
    </ion-item> -->

    <ion-item>
        <ion-label>Select Spare</ion-label>
        <ion-select [(ngModel)]="toppings" multiple="true" (ionChange)="spareSelect(toppings)">
            <ion-option *ngFor="let spare of spares" [value]="">{{spare.sparename}}</ion-option>
        </ion-select>
    </ion-item>

    <ion-item *ngIf="service">
        <ion-label>Tonnage</ion-label>
        <ion-select name="servicerate" [(ngModel)]="serviceRate">
            <ion-option *ngFor="let sub of service.subServicePrice" [value]="sub">{{sub.name}}, {{sub.type}}</ion-option>
        </ion-select>
        <ion-label>Quantity</ion-label>        
        <ion-select name="sparerateQuantity" [(ngModel)]="serviceRateQuantity" class="selectType">
            <ion-option value="1">1</ion-option>
            <ion-option value="2">2</ion-option>
            <ion-option value="3">3</ion-option>
            <ion-option value="4">4</ion-option>
            <ion-option value="5">5</ion-option>
            <ion-option value="6">6</ion-option>
            <ion-option value="7">7</ion-option>
            <ion-option value="8">8</ion-option>
            <ion-option value="9">9</ion-option>
            <ion-option value="10">10</ion-option>
        </ion-select>
    </ion-item>

    <!-- <ion-item class="profile-item">
        <ion-select placeholder="Type" class="selectType">
            <ion-option value="1">Service charge</ion-option>
            <ion-option value="2">Gas leak</ion-option>
            <ion-option value="3">Circuit Repair</ion-option>
            <ion-option value="4">capacitor</ion-option>
        </ion-select>
        <ion-select placeholder="Tonage" class="selectType">
            <ion-option value="1">0.8 Ton</ion-option>
            <ion-option value="2">1.0</ion-option>
            <ion-option value="3">1.5</ion-option>
            <ion-option value="4">2.0</ion-option>
        </ion-select>
        <ion-select placeholder="Qty" class="selectType">
            <ion-option value="1">1</ion-option>
            <ion-option value="2">2</ion-option>
            <ion-option value="3">3</ion-option>
            <ion-option value="4">4</ion-option>
            <ion-option value="5">5</ion-option>
            <ion-option value="6">6</ion-option>
            <ion-option value="7">7</ion-option>
            <ion-option value="8">8</ion-option>
            <ion-option value="9">9</ion-option>
            <ion-option value="10">10</ion-option>
        </ion-select>
        <ion-select placeholder="Price" class="selectType">
            <ion-option value="1">500</ion-option>
            <ion-option value="2">5000</ion-option>
            <ion-option value="3">10000</ion-option>
            <ion-option value="4">300</ion-option>
        </ion-select>
        <ion-label class="addItem">
            <ion-icon class="addBtn" ios="ios-add-circle" md="md-add-circle" (click)="addQuantity()"></ion-icon>
        </ion-label>
    </ion-item>
    <ion-item class="profile-item profileListView">
        <ion-label class="addItem">
            <ion-icon class="cancelBtn" ios="ios-close-circle" md="md-close-circle"></ion-icon>
        </ion-label>
        <ion-label class="listView" text-center>Air Conditioner</ion-label>
        <ion-label class="listView" text-center>2.0 Ton</ion-label>
        <ion-label class="listView" text-center>10</ion-label>
        <ion-label class="listView" text-center>10000.00</ion-label>
    </ion-item> -->

    <!-- <ion-item>
          <button ion-button (click)="spareSelect(toppings)" round>Ok</button>          
      </ion-item> -->
    <ion-grid *ngIf="finalSpare.length > 0">
        <!-- <ion-row>
            <ion-col>
                Spare
            </ion-col>

            <ion-col>
                Quantity
            </ion-col>
            <ion-col>
                Price
            </ion-col>
            <ion-col>
                Remove
            </ion-col>
        </ion-row> -->

        <ion-item class="profile-item profileListView">
            <ion-label class="addItem">
                <ion-icon class="cancelBtn" ios="ios-close-circle" md="md-close-circle"></ion-icon>
            </ion-label>
            <ion-label class="listView" text-center>Spare</ion-label>
            <ion-label class="listView" text-center>Cost</ion-label>            
            <ion-label class="listView" text-center>Quantity</ion-label>
            <ion-label class="listView" text-center>Price</ion-label>
            <!-- <ion-label class="listView" text-center>10000.00</ion-label> -->
        </ion-item>

        <form (ngSubmit)="sendBudget()">
            <!-- <ion-row *ngFor="let spare of finalSpare">
                <ion-col>
                    {{spare.sparename}}
                </ion-col>
                <ion-col>
                    {{spare.sparerate}}
                </ion-col>
                <ion-col>
                    <ion-select name="sparerate-{{spare.id}}" [(ngModel)]="spare.rate" class="selectType">
                        <ion-option value="1">1</ion-option>
                        <ion-option value="2">2</ion-option>
                        <ion-option value="3">3</ion-option>
                        <ion-option value="4">4</ion-option>
                        <ion-option value="5">5</ion-option>
                        <ion-option value="6">6</ion-option>
                        <ion-option value="7">7</ion-option>
                        <ion-option value="8">8</ion-option>
                        <ion-option value="9">9</ion-option>
                        <ion-option value="10">10</ion-option>
                    </ion-select>
                </ion-col>
                <ion-col>
                    <ion-icon ios="ios-close" md="md-close" (click)="removeSpare(spare)"></ion-icon>
                </ion-col>
            </ion-row> -->

            <ion-item class="profile-item profileListView" *ngFor="let spare of finalSpare">
                <ion-label class="addItem">
                    <ion-icon class="cancelBtn" ios="ios-close-circle" md="md-close-circle" (click)="removeSpare(spare)"></ion-icon>
                </ion-label>
                <ion-label class="listView" text-center>{{spare.sparename}}</ion-label>
                <ion-label class="listView" text-center>{{spare.sparerate}}</ion-label>                
                
                <!-- <ion-label class="listView" text-center>10</ion-label> -->
                <ion-select name="sparerate-{{spare.id}}" [(ngModel)]="spare.rate" class="selectType">
                    <ion-option value="1">1</ion-option>
                    <ion-option value="2">2</ion-option>
                    <ion-option value="3">3</ion-option>
                    <ion-option value="4">4</ion-option>
                    <ion-option value="5">5</ion-option>
                    <ion-option value="6">6</ion-option>
                    <ion-option value="7">7</ion-option>
                    <ion-option value="8">8</ion-option>
                    <ion-option value="9">9</ion-option>
                    <ion-option value="10">10</ion-option>
                </ion-select>
                <ion-label class="listView" *ngIf="spare.rate" text-center>{{spare.sparerate*spare.rate}}</ion-label>
                
                <!-- <ion-label class="listView" text-center>10000.00</ion-label> -->
            </ion-item>
            <!-- <ion-row *ngIf="service"> -->
                <!-- <ion-input type="number" name="sparerate" [(ngModel)]="serviceRate" placeholder="Service Price" required></ion-input> -->
                <!-- <ion-select name="servicerate" [(ngModel)]="serviceRate">
                    <ion-option *ngFor="let sub of service.subServicePrice" [value]="sub.name">{{sub.name}}</ion-option>
                </ion-select>
            </ion-row> -->
            <ion-item class="profile-item profileListView" *ngIf="serviceRate && serviceRateQuantity">
                <ion-label class="addItem">
                    <ion-icon class="cancelBtn" ios="ios-close-circle" md="md-close-circle"></ion-icon>
                </ion-label>
                <ion-label class="listView" text-center>Service</ion-label>
                <ion-label class="listView" text-center>Tonnage</ion-label>
                <ion-label class="listView" text-center>Quantity</ion-label>
                <ion-label class="listView" text-center>Price</ion-label>
            </ion-item>
            <ion-item class="profile-item profileListView" *ngIf="serviceRate && serviceRateQuantity">
                <ion-label class="addItem">
                    <ion-icon class="cancelBtn" ios="ios-close-circle" md="md-close-circle"></ion-icon>
                </ion-label>
                <ion-label class="listView" text-center>{{serviceRate.name}}</ion-label>
                <ion-label class="listView" text-center>{{serviceRate.type}}</ion-label>
                <ion-label class="listView" text-center>{{serviceRateQuantity}}</ion-label>
                <ion-label class="listView" text-center>{{serviceRate.Price*serviceRateQuantity}}</ion-label>
            </ion-item>
            <button class="btn-hrx" type="submit" ion-button round>Setup Final Price</button>
        </form>

        <!-- <ion-item *ngIf="service">
            <ion-select name="servicerate" [(ngModel)]="serviceRate">
                <ion-option *ngFor="let sub of service.subServicePrice" [value]="sub.name">{{sub.name}}</ion-option>
            </ion-select>
        </ion-item> -->
    </ion-grid>
    <ion-label *ngIf="spareTotalPrice">Final Service Charge: {{spareTotalPrice}}</ion-label>
    <button ion-button color="danger" (click)="closeRequest()" full round>Complete Request</button>
</ion-content>